# LemonSqueezy License API Documentation

## Introduction

The LemonSqueezy License API is designed for managing licenses generated by LemonSqueezy, a platform for selling digital products. This API enables you to activate, validate, or deactivate license keys, which is essential for software and digital content sellers to control access for their customers.

## Getting Started

To use the API, all requests must be made over HTTPS to the base URL `https://api.lemonsqueezy.com`. Include the `Accept: application/json` header in all requests, and for POST requests, use the `Content-Type: application/x-www-form-urlencoded` header. The API is rate limited to 60 requests per minute, so plan your usage accordingly.

## Endpoints and Usage

The API provides three main endpoints, each with specific parameters and responses. Below, we detail how to use each one, including example requests and expected responses.

### Activate a License Key

**Endpoint:** `POST /v1/licenses/activate`

**Parameters:**
- `license_key` (required): The license key to activate
- `instance_name` (required): A label for the instance

**Example Request:**
```bash
curl -X POST https://api.lemonsqueezy.com/v1/licenses/activate \
-H "Accept: application/json" \
-d "license_key=38b1460a-5104-4067-a91d-77b872934d51" \
-d "instance_name=Test"
```

**Response Example:**
```json
{
  "activated": true,
  "error": null,
  "license_key": {
    "id": 1,
    "status": "active",
    "key": "38b1460a-5104-4067-a91d-77b872934d51",
    "activation_limit": 1,
    "activation_usage": 5,
    "created_at": "2021-01-24T14:15:07.000000Z",
    "expires_at": null
  },
  "instance": {
    "id": "47596ad9-a811-4ebf-ac8a-03fc7b6d2a17",
    "name": "Test",
    "created_at": "2021-04-06T14:15:07.000000Z"
  },
  "meta": {
    "store_id": 1,
    "order_id": 2,
    "order_item_id": 3,
    "product_id": 4,
    "product_name": "Example Product",
    "variant_id": 5,
    "variant_name": "Default",
    "customer_id": 6,
    "customer_name": "John Doe",
    "customer_email": "john@example.com"
  }
}
```

### Validate a License Key

**Endpoint:** `POST /v1/licenses/validate`

**Parameters:**
- `license_key` (required): The license key to validate
- `instance_id` (optional): For validating a specific instance

**Example Request:**
```bash
curl -X POST https://api.lemonsqueezy.com/v1/licenses/validate \
-H "Accept: application/json" \
-d "license_key=38b1460a-5104-4067-a91d-77b872934d51" \
-d "instance_id=f90ec370-fd83-46a5-8bbd-44a241e78665"
```

**Response Example:**
```json
{
  "valid": true,
  "error": null,
  "license_key": {
    "id": 1,
    "status": "active",
    "key": "38b1460a-5104-4067-a91d-77b872934d51",
    "activation_limit": 1,
    "activation_usage": 5,
    "created_at": "2021-01-24T14:15:07.000000Z",
    "expires_at": "2022-01-24T14:15:07.000000Z"
  },
  "instance": {
    "id": "f90ec370-fd83-46a5-8bbd-44a241e78665",
    "name": "Test",
    "created_at": "2021-02-24T14:15:07.000000Z"
  },
  "meta": {
    "store_id": 1,
    "order_id": 2,
    "order_item_id": 3,
    "product_id": 4,
    "product_name": "Lemonade",
    "variant_id": 5,
    "variant_name": "Citrus Blast",
    "customer_id": 6,
    "customer_name": "John Doe",
    "customer_email": "john@example.com"
  }
}
```

### Deactivate a License Key

**Endpoint:** `POST /v1/licenses/deactivate`

**Parameters:**
- `license_key` (required): The license key to deactivate
- `instance_id` (required): The instance to deactivate

**Example Request:**
```bash
curl -X POST https://api.lemonsqueezy.com/v1/licenses/deactivate \
-H "Accept: application/json" \
-d "license_key=38b1460a-5104-4067-a91d-77b872934d51" \
-d "instance_id=f90ec370-fd83-46a5-8bbd-44a241e78665"
```

**Response Example:**
```json
{
  "deactivated": true,
  "error": null,
  "license_key": {
    "id": 1,
    "status": "inactive",
    "key": "38b1460a-5104-4067-a91d-77b872934d51",
    "activation_limit": 5,
    "activation_usage": 0,
    "created_at": "2021-01-24T14:15:07.000000Z",
    "expires_at": null
  },
  "meta": {
    "store_id": 1,
    "order_id": 2,
    "order_item_id": 3,
    "product_id": 4,
    "product_name": "Lemonade",
    "variant_id": 5,
    "variant_name": "Citrus Burst",
    "customer_id": 6,
    "customer_name": "John Doe",
    "customer_email": "john@example.com"
  }
}
```

## License Key Status

License keys can have one of the following statuses:

- **inactive**: Valid but no activations.
- **active**: Has one or more activations.
- **expired**: Expiry date has passed.
- **disabled**: Manually disabled from the dashboard.

## Error Handling

The API returns appropriate HTTP status codes for errors:

| Error Code | Description |
|------------|-------------|
| 400 | An error occurred. See error field. |
| 404 | An item could not be found. |
| 422 | A required field was invalid/missing. |

## Authentication Considerations

An interesting aspect of the License API is that it appears to not require explicit authentication like the main LemonSqueezy API. The examples for activating, validating, and deactivating license keys do not include an Authorization header, suggesting that the License API may rely on the license key itself for identification.

## Additional Notes

- Ensure all requests are made over HTTPS
- Handle errors by checking the response status and error field
- Be mindful of the rate limit (60 requests per minute) to avoid throttling
- The meta object in responses includes valuable information such as customer email and product details, which can be used for further integration with LemonSqueezy's main API for order and product data